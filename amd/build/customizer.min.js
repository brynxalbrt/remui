"use strict";define(["jquery","core/ajax","core/notification","core/modal_factory","core/modal_events","./customizer/utils","./customizer/global-site","./customizer/global-body","./customizer/global-colors","./customizer/global-heading","./customizer/global-buttons","./customizer/header-site-identity","./customizer/header-primary","./customizer/header-menu","./customizer/left-sidebar","./customizer/footer","./customizer/additional-settings","core/modal_save_cancel"],function(t,e,n,i,o,a,c,s,r,l,u,d,E,g,m,p,f){var T={SAVE_SETTINGS:function(t){return e.call([{methodname:"theme_remui_customizer_save_settings",args:{settings:t}}])[0]}},S={CONTROLS:"#customize-controls",MODE_TOGGLE:"#customize-controls .mode-toggle",WRAP:"#customizer-wrap",CLOSE_CUSTOMIZER:".customize-controls-close",CUSTMIZER_TOGGLE:".customizer-controls-toggle",COLOR_SETTING:".setting-type-color",PUBLISH:"#publish-settings",IFRAME:"#customizer-frame",MAIN_OVERLAY:"#main-overlay",PANEL_LINK:"[sidebar-panel-link]",PANEL_BACK:".customize-panel-back",PANEL:".sidebar-panel",PANEL_ID:"panel-id",PREVIOUS:"previous",CURRENT:"current",NEXT:"next",SETTINGS_RESET:"#reset-settings",INPUT_RESET:".input-reset",SELECT_RESET:".select-reset",CHECKBOX_RESET:".checkbox-reset",COLOR_RESET:".color-reset",TEXTAREA_RESET:".textarea-reset",HEADING_TOGGLE:".heading-toggle"};function _(){c.init(),s.init(),r.init(),l.init(),u.init(),d.init(),E.init(),g.init(),m.init(),p.init(),f.init(),t(document).trigger("edwiser.customizer.init")}function R(){c.apply(),s.apply(),r.apply(),l.apply(),u.apply(),d.apply(),E.apply(),g.apply(),m.apply(),p.apply(),f.apply(),t(document).trigger("edwiser.customizer.apply")}return{init:function(){1!=window["customizer-enabled"]&&(window["customizer-enabled"]=!0,t(document).ready(function(t){_(),t(S.IFRAME).on("load",function(){t(a.getDocument()).find("body").addClass("customizer-opened"),t(a.getDocument()).find(".customizer-editing-icon").closest("a").addClass("d-none").removeClass("d-flex"),t(a.getDocument()).find("#sidebar-setting").addClass("d-none"),t(document).trigger("remui-adjust-left-side");var e=this.contentWindow;setTimeout(function(){window.history.replaceState("pagechange",document.title,M.cfg.wwwroot+"/theme/remui/customizer.php?url="+encodeURI(e.location.href)),t(S.CLOSE_CUSTOMIZER).attr("href",e.location.href),R(),a.hideLoader(),e.onbeforeunload=function(){a.showLoader()}},10)}),t(S.SETTINGS_RESET).on("click",function(){i.create({title:M.util.get_string("reset","moodle"),body:M.util.get_string("reset-settings-description","theme_remui"),type:i.types.SAVE_CANCEL},t("#create")).done(function(e){e.show(),e.setSaveButtonText(M.util.get_string("yes","moodle")),e.getRoot().on(o.save,function(){t(S.MAIN_OVERLAY).removeClass("d-none"),T.SAVE_SETTINGS(JSON.stringify([])).done(function(t){location.reload()}).fail(function(e){n.exception(e),t(S.MAIN_OVERLAY).addClass("d-none")})})})}),t(S.PANEL_LINK).on("click",function(){t(S.PANEL+"#"+t(this).data(S.PANEL_ID)).addClass(S.CURRENT),t(this).closest(S.PANEL).removeClass(S.CURRENT)}),t(S.PANEL_BACK).on("click",function(){t(S.PANEL+":not("+S.PANEL+"#"+t(this).data(S.PANEL_ID)+")").removeClass(S.CURRENT),t(S.PANEL+"#"+t(this).data(S.PANEL_ID)).addClass(S.CURRENT)}),t(S.MODE_TOGGLE).on("click",function(){t(S.WRAP).removeClass("mode-desktop mode-tablet mode-mobile").addClass("mode-".concat(t(this).data("mode")))}),t(S.CONTROLS).on("submit",function(t){return t.preventDefault(),!1}),t("\n                ".concat(S.CONTROLS,' input[type="text"],\n                ').concat(S.CONTROLS,' input[type="number"],\n                ').concat(S.CONTROLS,' input[type="checkbox"]\n                ').concat(S.CONTROLS," textarea,\n                ").concat(S.CONTROLS," select\n            ")).on("change",function(){t(S.CONTROLS).data("unsaved",!0)}),t("".concat(S.CONTROLS,' input[type="color"]')).on("color.changed",function(){t(S.CONTROLS).data("unsaved",!0)}),t(S.PUBLISH).on("click",function(){t(S.MAIN_OVERLAY).removeClass("d-none");var e=t(S.CONTROLS).serializeArray();e.forEach(function(n,i){t('[name="'.concat(n.name,'"]')).is(".site-colorpicker")&&(n.value=t('[name="'.concat(n.name,'"]')).spectrum("get").toString(),e[i]=n)}),T.SAVE_SETTINGS(JSON.stringify(e)).done(function(e){var n={type:i.types.ALERT};0==e.status?(n.title=M.util.get_string("error","theme_remui"),n.body=e.errors):(n.title=M.util.get_string("success","moodle"),n.body=e.message,t(S.CONTROLS).data("unsaved",!1)),i.create(n,t("#create")).done(function(e){e.show(),t(S.MAIN_OVERLAY).addClass("d-none")})}).fail(n.exception)}),t(S.CLOSE_CUSTOMIZER).on("click",function(e){if(0==t(S.CONTROLS).data("unsaved"))return!0;e.preventDefault(),i.create({title:M.util.get_string("customizer-close-heading","theme_remui"),body:M.util.get_string("customizer-close-description","theme_remui"),type:i.types.SAVE_CANCEL},t("#create")).done(function(e){e.show(),e.setSaveButtonText(M.util.get_string("yes","moodle")),e.getRoot().on(o.save,function(){window.location=t(S.CLOSE_CUSTOMIZER).attr("href")})})}),t(S.CUSTMIZER_TOGGLE).on("click",function(){t("body").toggleClass("full-customizer")}),t(S.COLOR_RESET).on("click",function(){var e=t(this).data("default");t(this).next().find("input").spectrum("set",e),t(this).next().find("input").trigger("color.changed",e)}),t(S.CHECKBOX_RESET).on("click",function(){var e=t(this).data("default");t(this).next().find("input").prop("checked",t(this).next().find("input").val()==e),t(this).next().find("input").trigger("change").trigger("input")}),t(S.SELECT_RESET).on("click",function(){var e=t(this).data("default");t(this).next().find("select").val(e).trigger("input").trigger("change")}),t(S.INPUT_RESET).on("click",function(){var e=t(this).data("default");t(this).next().find("input").val(e).trigger("input").trigger("change")}),t(S.TEXTAREA_RESET).on("click",function(){var e=t(this).data("default");t(this).next().find("textarea").val(e).trigger("input").trigger("change")}),t(S.HEADING_TOGGLE).on("click",function(){t(this).next().slideToggle("fast")})}))}}});
//# sourceMappingURL=customizer.min.js.map
