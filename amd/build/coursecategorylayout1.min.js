"use strict";define(["jquery","core/ajax","core/str","core/templates","theme_remui/jquery-toolbar"],function(e,t,a,o,n){var r,i,s=e("#categoryfilter .categoryselector"),c=e(".course-cards"),l=e(".cards-pagination"),p=".page-header-actionss",u="theme_remui/course_card_grid",d=e(".simplesearchform .simplesearchform"),g=(e(".custom-switch"),e(".course-counter span.course-number")),h=e(".course-tags .tag-wrapper");function f(){e(c).empty(),r.pagination&&l.empty(),y()}function m(){t.call([{methodname:"theme_remui_get_tags",args:{data:JSON.stringify(r)}}])[0].done(function(e){h.empty().append(e)}).fail(Notification.exception)}function y(){r.isFilterModified&&function(){e(".courses-tabs .courses-loader-wrap").show();t.call([{methodname:"theme_remui_get_courses",args:{data:JSON.stringify(r)}}])[0].done(function(t){t=JSON.parse(t),e(p).empty(),1==t.hasmanagebutton&&e(p).append(t.managebuttons),null!=t.dropdown?e("#page-header .page-header-actionss").append(t.dropdown):e('#page-header .page-header-actionss [data-enhance="moodle-core-actionmenu"]').remove();var a=u,n=t.courses;if(t.latest_card&&c.addClass("latest-cards"),e(g).text(t.totalcoursescount),n.length>0)for(var s=0;s<n.length;s++)o.render(a,n[s]).then(function(a,n){o.appendNodeContents(c,a,n),t.latest_card||e(".course-cards .showoptions").each(function(){e(this).toolbar({content:e(this).data("toolbar"),style:"primary"})})}).fail(Notification.exception);else{var d='<div class="alert alert-warning alert-dismissible  w-full mx-10" role="alert">';d+='<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">Ã—</span><span class="sr-only">Close</span></button>'+i[0]+"</div>",o.appendNodeContents(c,d,"")}r.pagination&&(l.empty(),o.appendNodeContents(l,t.pagination,""))}).fail(Notification.exception)}()}e(document).delegate(".tool-item","click",function(){window.location=e(this).attr("href")}),e(s).on("change",function(e){r.category=e.target.value,r.initPagination(),f(),m()}),e(d).on("submit",function(t){t.preventDefault(),r.initPagination(),r.search=e('.simplesearchform .input-group input[type="text"]').val(),f()}),e("#switch-label1, #switch-label2").on("change.bootstrapSwitch",function(e,t){r.tab=e.target.checked,f(),m()}),e(document).delegate(".cards-pagination .pagination .page-item .page-link","click",function(e){e.preventDefault();var t=e.target.href;void 0===t&&void 0===(t=e.target.parentElement.href)&&(t=e.target.parentElement.parentElement.href);for(var a,o=t.slice(t.indexOf("?")+1).split("&"),n=[],i=0;i<o.length;i++)a=o[i].split("="),n.push(a[0]),n[a[0]]=a[1];r.tab?r.page.mycourses=n.page:r.page.courses=n.page,f()});return{init:function(){e("[category-filter-link]").on("click",function(t){return t.preventDefault(),e(s).val(e(this).data("id")).trigger("change"),!1});a.get_strings([{key:"nocoursefound",component:"theme_remui"}]).then(function(t){var a,o;i=t,r=o={category:"all",sort:"ASC",search:"",tab:!1,page:a={courses:0,mycourses:0},pagination:!0,isFilterModified:!0,initAttributes:function(){o.category="all",o.sort="ASC",o.search="",o.tab=!1,o.page=a,o.pagination=!0,o.isFilterModified=!0},initPagination:function(){o.page={courses:0,mycourses:0}}};for(var n,s,c=[],l=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),p=0;p<l.length;p++)n=l[p].split("="),c.push(n[0]),c[n[0]]=n[1];c.categoryid&&0!=c.categoryid&&(r.category=c.categoryid),null!=c.categorysort&&(r.sort=c.categorysort),null!=c.search&&(r.search=c.search),c.mycourses&&0!=c.mycourses&&(r.tab=!0,e("body").hasClass("notloggedin")&&(r.tab=!1)),""!==(s=r).category&&e("#categoryfilter .categoryselector").val(s.category),1==s.tab?e("#switch-label1, #switch-label2").prop("checked",!0):e("#switch-label1, #switch-label2").prop("checked",!1),""!==s.search&&e("#coursesearchbox").val(s.search),y(),m()})}}});
//# sourceMappingURL=coursecategorylayout1.min.js.map
