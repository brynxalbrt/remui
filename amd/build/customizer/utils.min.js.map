{"version":3,"sources":["customizer/utils.js"],"names":["define","$","Ajax","Notification","SELECTOR","CONTROLS","IFRAME","WRAP","IFRAME_OVERLAY","PROMISES","GET_FILE_URL","itemid","call","methodname","args","getDocument","contentDocument","putStyle","id","content","bodyDOM","find","length","append","concat","html","getWindow","contentWindow","deviceWidth","tablet","mobile","getFileURL","fail","exception","fileObserver","targetNode","callBack","MutationObserver","data","observe","attributes","attributeFilter","childList","characterData","showLoader","show","hideLoader","hide"],"mappings":"AAAA,aAEAA,OAAO,+BAAgC,CAAC,SAAU,YAAa,qBAAsB,SAAUC,EAAGC,EAAMC,GAItG,IAAIC,EAAW,CACbC,SAAU,sBACVC,OAAQ,oBACRC,KAAM,mBACNC,eAAgB,oBAMdC,EAAW,CAMbC,aAAc,SAAsBC,GAClC,OAAOT,EAAKU,KAAK,CAAC,CAChBC,WAAY,+CACZC,KAAM,CACJH,OAAQA,MAER,KAgBR,SAASI,IACP,OAAOd,EAAEG,EAASE,QAAQ,GAAGU,gBA2E/B,MAAO,CACLC,SA1DF,SAAkBC,EAAIC,GACpBD,GAAM,SACN,IAAIE,EAAUnB,EAAEc,KAAeM,KAAK,QAEI,GAApCpB,EAAEmB,GAASC,KAAK,IAAMH,GAAII,QAC5BrB,EAAEmB,GAASG,OAAO,cAAeC,OAAON,EAAI,eAG9CjB,EAAEmB,GAASC,KAAK,IAAMH,GAAIO,KAAKN,IAmD/BJ,YAAaA,EACbW,UAtEF,WACE,OAAOzB,EAAEG,EAASE,QAAQ,GAAGqB,eAsE7BC,YAzFgB,CAChBC,OAAQ,IACRC,OAAQ,KAwFRC,WA9CF,SAAoBpB,GAClB,OAAOF,EAASC,aAAaC,GAAQqB,KAAK7B,EAAa8B,YA8CvDC,aArCF,SAAsBC,EAAYC,GAEjB,IAAIC,iBAAiB,WAClCpC,EAAEG,EAASC,UAAUiC,KAAK,WAAW,GACrCF,MAGOG,QAAQJ,EAAY,CAC3BK,YAAY,EACZC,gBAAiB,CAAC,SAClBC,WAAW,EACXC,eAAe,KA2BjBC,WAnBF,WACE3C,EAAEG,EAASI,gBAAgBqC,QAmB3BC,WAZF,WACE7C,EAAEG,EAASI,gBAAgBuC","sourcesContent":["define('theme_remui/customizer/utils', ['jquery', 'core/ajax', 'core/notification'], function($, Ajax, Notification) {\n\n    /**\n     * Selectors\n     */\n    var SELECTOR = {\n        CONTROLS: '#customize-controls',\n        IFRAME: '#customizer-frame',\n        WRAP: '#customizer-wrap',\n        IFRAME_OVERLAY: '#preview-overlay',\n    };\n    \n    /**\n     * Promises list.\n     */\n    var PROMISES = {\n        /**\n         * Get file url using itemid\n         * @param {number} itemid Item id\n         * @return {Promise}\n         */\n        GET_FILE_URL: function(itemid) {\n            return Ajax.call([{\n                methodname: 'theme_remui_customizer_get_file_from_setting',\n                args: {\n                    itemid: itemid\n                }\n            }])[0];\n        }\n    }\n\n    /**\n     * Device widths\n     */\n    var deviceWidth = {\n        tablet: 768,\n        mobile: 480\n    };\n\n    /**\n     * Get contentDocument of iframe\n     * @return contentDocument\n     */\n    function getDocument() {\n        return $(SELECTOR.IFRAME)[0].contentDocument;\n    }\n\n    /**\n     * Get contentWindow of iframe\n     * @return contentWindow\n     */\n    function getWindow() {\n        return $(SELECTOR.IFRAME)[0].contentWindow;\n    }\n\n    /**\n     * Put style in style tag.\n     * @param {String} id      Id for style tag\n     * @param {String} content Style content\n     */\n    function putStyle(id, content) {\n        id += '_style';\n        let bodyDOM = $(getDocument()).find('body');\n\n        if ($(bodyDOM).find('#' + id).length == 0) {\n            $(bodyDOM).append(`<style id=\"${id}\"></style>`);\n        }\n        $(bodyDOM).find('#' + id).html(content);\n    }\n\n    /**\n     * Get file user from itemid\n     * @param {number} itemid file itemid\n     */\n    function getFileURL(itemid) {\n        return PROMISES.GET_FILE_URL(itemid).fail(Notification.exception);\n    }\n\n    /**\n     * File observer.\n     * @param {DOM} targetNode Node on which observer will be applied\n     * @param {function} callBack Callback method\n     */\n    function fileObserver(targetNode, callBack) {\n        // Create an observer instance linked to the callback function\n        const observer = new MutationObserver(function() {\n            $(SELECTOR.CONTROLS).data('unsaved', true);\n            callBack();\n        });\n\n        // Start observing the target node for configured mutations\n        observer.observe(targetNode, {\n            attributes: true, \n            attributeFilter: ['class'],\n            childList: false, \n            characterData: false\n        });\n    }\n\n    /**\n     * Show loader.\n     */\n    function showLoader() {\n        $(SELECTOR.IFRAME_OVERLAY).show();\n    }\n\n    /**\n     * Hide loader/\n     */\n    function hideLoader() {\n        $(SELECTOR.IFRAME_OVERLAY).hide();\n    }\n\n    return {\n        putStyle: putStyle,\n        getDocument: getDocument,\n        getWindow: getWindow,\n        deviceWidth: deviceWidth,\n        getFileURL: getFileURL,\n        fileObserver: fileObserver,\n        showLoader: showLoader,\n        hideLoader: hideLoader\n    }\n});\n"],"file":"utils.min.js"}