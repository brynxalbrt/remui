{"version":3,"sources":["customizer/header-site-identity.js"],"names":["define","$","Utils","SELECTOR","BASE","IDENTITYPREFIX","LOGOORSITENAME","ICON","FONTSIZE","LOGO","LOGOMINI","BACKGROUNDCOLOR","logoSelectorHandler","concat","closest","addClass","val","removeClass","getDocument","find","logoHandler","body","itemid","getFileURL","done","response","M","cfg","wwwroot","attr","logoSizeHandler","fontsize","css","content","fontSize","deviceWidth","mobile","tablet","putStyle","apply","icon","init","fileObserver","siblings","on"],"mappings":"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","sourcesContent":["define('theme_remui/customizer/header-site-identity', ['jquery', './utils'], function($, Utils) {\n\n    /**\n     * Selectors\n     */\n    var SELECTOR = {\n        BASE: 'header-site-identy',\n        IDENTITYPREFIX: 'header-site-identity',\n        LOGOORSITENAME: 'logoorsitename',\n        ICON: 'siteicon',\n        FONTSIZE: 'header-site-identity-fontsize',\n        LOGO: 'logo',\n        LOGOMINI: 'logomini',\n        BACKGROUNDCOLOR: 'header-background-color'\n    };\n\n    function logoSelectorHandler() {\n        $(`\n            [name='${SELECTOR.ICON}'],\n            [name='${SELECTOR.FONTSIZE}'],\n            [name='${SELECTOR.LOGO}'],\n            [name='${SELECTOR.LOGOMINI}'],\n            [name='${SELECTOR.BACKGROUNDCOLOR}']\n        `).closest('.setting-item').addClass('d-none');\n        switch($(`[name='${SELECTOR.LOGOORSITENAME}']`).val()) {\n            case 'iconsitename':\n                $(`\n                    [name='${SELECTOR.ICON}'],\n                    [name='${SELECTOR.FONTSIZE}']\n                `).closest('.setting-item').removeClass('d-none');\n                break;\n            case 'logo':\n                $(`\n                    [name='${SELECTOR.LOGO}'],\n                    [name='${SELECTOR.LOGOMINI}'],\n                    [name='${SELECTOR.BACKGROUNDCOLOR}']\n                `).closest('.setting-item').removeClass('d-none');\n                break;\n            case 'sitenamewithlogo':\n                $(`\n                    [name='${SELECTOR.FONTSIZE}'],\n                    [name='${SELECTOR.LOGO}'],\n                    [name='${SELECTOR.LOGOMINI}'],\n                    [name='${SELECTOR.BACKGROUNDCOLOR}']\n                `).closest('.setting-item').removeClass('d-none');\n                break;\n        }\n        let body = $(Utils.getDocument()).find('body');\n        body.removeClass(`\n            ${SELECTOR.IDENTITYPREFIX}-iconsitename\n            ${SELECTOR.IDENTITYPREFIX}-logo\n            ${SELECTOR.IDENTITYPREFIX}-sitenamewithlogo\n        `)\n        .addClass(SELECTOR.IDENTITYPREFIX + '-' + $(`[name='${SELECTOR.LOGOORSITENAME}']`).val());\n    }\n\n    function logoHandler() {\n        let body = $(Utils.getDocument()).find('body');\n\n        // Logo.\n        let itemid = $(`[name='${SELECTOR.LOGO}']`).val();\n        Utils.getFileURL(itemid).done(function(response) {\n            if (response == '') {\n                response = M.cfg.wwwroot + '/theme/remui/pix/logo.png';\n            }\n            $(body).find('.navbar .header-logo .navbar-brand-logo:not(.mini)').attr('src', response);\n        });\n\n        // Logo mini.\n        itemid = $(`[name='${SELECTOR.LOGOMINI}']`).val();\n        Utils.getFileURL(itemid).done(function(response) {\n            if (response == '') {\n                response = M.cfg.wwwroot + '/theme/remui/pix/logomini.png';\n            }\n            $(body).find('.navbar .header-logo .navbar-brand-logo.mini').attr('src', response);\n        });\n    }\n\n    function logoSizeHandler() {\n        let body = $(Utils.getDocument()).find('body');\n        let fontsize = $(`[name=\"${SELECTOR.FONTSIZE}\"]`).val();\n        $(body).find('.navbar .navbar-brand-logo').css('font-size', fontsize + 'rem');\n        let content = '';\n        // Tablet.\n        fontSize = $(`[name='${SELECTOR.FONTSIZE}-tablet']`).val();\n        if (fontSize != '') {\n            content += `\\n\n                @media screen and (min-width: ${Utils.deviceWidth.mobile + 1}px) and (max-width: ${Utils.deviceWidth.tablet}px) {\n                    .navbar .header-sitename .navbar-brand-logo {\n                        font-size: ${fontSize}rem !important;\n                    }\n                }\n            `;\n        }\n        \n        // Mobile.\n        fontSize = $(`[name='${SELECTOR.FONTSIZE}-mobile']`).val();\n        if (fontSize != '') {\n            content += `\\n\n                @media screen and (max-width: ${Utils.deviceWidth.mobile}px) {\n                    .navbar .header-sitename .navbar-brand-logo {\n                        font-size: ${fontSize}rem !important;\n                    }\n                }\n            `;\n        }\n        Utils.putStyle(SELECTOR.BASE, content);\n    }\n\n    function apply() {\n        logoSelectorHandler();\n        let icon = $(`[name=\"${SELECTOR.ICON}\"]`).val();\n        if (icon == '') {\n            icon = 'graduation-cap';\n        }\n        let body = $(Utils.getDocument()).find('body');\n        $(body).find('.navbar .header-sitename .navbar-brand-logo i').attr('class', 'fa fa-' + icon);\n        logoSizeHandler();\n        logoHandler();\n    }\n    function init() {\n        // Logo mini listener.\n        Utils.fileObserver($(`[name='${SELECTOR.LOGO}']`).siblings('.filemanager')[0], logoHandler);\n\n        // Logo listener.\n        Utils.fileObserver($(`[name='${SELECTOR.LOGOMINI}']`).siblings('.filemanager')[0], logoHandler);\n\n        // Logo or sitename chooser listener.\n        $(`[name='${SELECTOR.LOGOORSITENAME}']`).on('change', function() {\n            logoSelectorHandler();\n        });\n\n        // Site icon listener.\n        $(`[name=\"${SELECTOR.ICON}\"]`).on('input', function() {\n            apply();\n        });\n\n        // Font size listener.\n        $(`\n            [name=\"${SELECTOR.FONTSIZE}\"],\n            [name=\"${SELECTOR.FONTSIZE}-tablet\"],\n            [name=\"${SELECTOR.FONTSIZE}-mobile\"]\n        `).on('input', logoSizeHandler);\n    }\n\n    return {\n        init: init,\n        apply: apply\n    }\n});\n"],"file":"header-site-identity.min.js"}