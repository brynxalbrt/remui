{"version":3,"sources":["customizer/global-colors.js"],"names":["define","$","Utils","SELECTOR","SITECOLOR","BACKGROUNDCHOOSE","BACKGROUNDCOLOR","BACKGROUNDGRAD1","BACKGROUNDGRAD2","BACKGROUNDIMAGE","BACKGROUNDIMAGEATTACHMENT","handleBackground","concat","closest","addClass","val","removeClass","color","spectrum","toString","putStyle","color1","color2","itemid","attachment","getFileURL","done","response","M","cfg","wwwroot","apply","init","bind","on","fileObserver","siblings"],"mappings":"AAAA,aAEAA,OAAO,uCAAwC,CAAC,SAAU,WAAY,SAAUC,EAAGC,GACjF,IAAIC,EAAW,CACbC,UAAW,eACXC,iBAAkB,+BAClBC,gBAAiB,oCACjBC,gBAAiB,wCACjBC,gBAAiB,wCACjBC,gBAAiB,oCACjBC,0BAA2B,+CAW7B,SAASC,IAGP,OAFAV,EAAE,wBAAwBW,OAAOT,EAASG,gBAAiB,4BAA4BM,OAAOT,EAASI,gBAAiB,4BAA4BK,OAAOT,EAASK,gBAAiB,4BAA4BI,OAAOT,EAASM,gBAAiB,4BAA4BG,OAAOT,EAASO,0BAA2B,iBAAiBG,QAAQ,iBAAiBC,SAAS,UAEpWb,EAAE,UAAUW,OAAOT,EAASE,iBAAkB,OAAOU,OAC3D,IAAK,QACHd,EAAE,UAAUW,OAAOT,EAASG,gBAAiB,OAAOO,QAAQ,iBAAiBG,YAAY,UACzF,IAAIC,EAAQhB,EAAE,UAAUW,OAAOT,EAASG,gBAAiB,OAAOY,SAAS,OAAOC,WAChFjB,EAAMkB,SAASjB,EAASE,iBAAkB,4EAA4EO,OAAOK,EAAO,+CACpI,MAEF,IAAK,WACHhB,EAAE,gCAAgCW,OAAOT,EAASI,gBAAiB,oCAAoCK,OAAOT,EAASK,gBAAiB,yBAAyBK,QAAQ,iBAAiBG,YAAY,UACtM,IAAIK,EAASpB,EAAE,UAAUW,OAAOT,EAASI,gBAAiB,OAAOW,SAAS,OAAOC,WAC7EG,EAASrB,EAAE,UAAUW,OAAOT,EAASK,gBAAiB,OAAOU,SAAS,OAAOC,WACjFjB,EAAMkB,SAASjB,EAASE,iBAAkB,8FAA8FO,OAAOS,EAAQ,MAAMT,OAAOU,EAAQ,gDAC5K,MAEF,IAAK,QACHrB,EAAE,gCAAgCW,OAAOT,EAASM,gBAAiB,oCAAoCG,OAAOT,EAASO,0BAA2B,yBAAyBG,QAAQ,iBAAiBG,YAAY,UAChN,IAAIO,EAAStB,EAAE,UAAUW,OAAOT,EAASM,gBAAiB,OAAOM,MAC7DS,EAAavB,EAAE,UAAUW,OAAOT,EAASO,0BAA2B,OAAOK,MAC/Eb,EAAMuB,WAAWF,GAAQG,KAAK,SAAUC,GACtB,IAAZA,IACFA,EAAWC,EAAEC,IAAIC,QAAU,oCAG7B5B,EAAMkB,SAASjB,EAASE,iBAAkB,mFAAmFO,OAAOe,EAAU,4DAA4Df,OAAOY,EAAY,2GAA2GZ,OAAqB,SAAdY,EAAwB,QAAU,OAAQ,0DAMjY,SAASO,IArCT,IACMd,EAqCJf,EAAMkB,SAASjB,EAASC,WArCpBa,EAAQhB,EAAE,UAAUW,OAAOT,EAASC,UAAW,OAAOc,SAAS,OAAOC,WACnE,wSAAwSP,OAAOK,EAAO,sQAAsQL,OAAOK,EAAO,8QAAiRL,OAAOK,EAAO,6BAqCh3BN,IAmBF,MAAO,CACLqB,KAjBF,WAEE/B,EAAE,wBAAwBW,OAAOT,EAASC,UAAW,iBAAiB6B,KAAK,gBAAiB,WAC1FF,MAEF9B,EAAE,wBAAwBW,OAAOT,EAASG,gBAAiB,4BAA4BM,OAAOT,EAASI,gBAAiB,4BAA4BK,OAAOT,EAASK,gBAAiB,iBAAiB0B,GAAG,gBAAiB,WACxNvB,MAGFV,EAAE,wBAAwBW,OAAOT,EAASE,iBAAkB,4BAA4BO,OAAOT,EAASO,0BAA2B,iBAAiBwB,GAAG,QAAS,WAC9JvB,MAGFT,EAAMiC,aAAalC,EAAE,UAAUW,OAAOT,EAASM,gBAAiB,OAAO2B,SAAS,gBAAgB,GAAIzB,IAKpGoB,MAAOA","sourcesContent":["define('theme_remui/customizer/global-colors', ['jquery', './utils'], function($, Utils) {\n\n    var SELECTOR = {\n        SITECOLOR: 'sitecolorhex',\n        BACKGROUNDCHOOSE: 'global-colors-pagebackground',\n        BACKGROUNDCOLOR: 'global-colors-pagebackgroundcolor',\n        BACKGROUNDGRAD1: 'global-colors-pagebackgroundgradient1',\n        BACKGROUNDGRAD2: 'global-colors-pagebackgroundgradient2',\n        BACKGROUNDIMAGE: 'global-colors-pagebackgroundimage',\n        BACKGROUNDIMAGEATTACHMENT: 'global-colors-pagebackgroundimageattachment'\n    }\n\n    /**\n     * Get site color content.\n     */\n    function getSiteColorContent() {\n        let color = $(`[name='${SELECTOR.SITECOLOR}']`).spectrum('get').toString();\n        return `.collection thead th, .generaltable thead th, .navbar-brand, .nav-inverse, #page-footer,\n        .bg-primary, .btn-primary, .td.today, .form-submit, .page-aside-switch, table.dataTable thead th,\n        table.dataTable tfoot th, .page-item.active .page-link {\n            background-color: ${color} !important;\n        }\n        .nav-tabs .nav-link.active, .btn-primary, .checkbox-custom input[type=checkbox]:checked+label::before,\n        .radio-custom input[type=radio]:checked+label::before, .page-item.active .page-link {\n            border-color: ${color} !important;\n        }' +\n        .text-primary, .nav-tabs .nav-link.active, .nav-tabs .nav-link.active .fa, [data-region=\"drawer\"]:not(.dark)\n        .list-group-item.active, [data-region=\"drawer\"]:not(.dark) .list-group-item.active .icon {\n            color: ${color} !important;\n        }`;\n    }\n\n    function handleBackground() {\n        $(`\n            [name='${SELECTOR.BACKGROUNDCOLOR}'],\n            [name='${SELECTOR.BACKGROUNDGRAD1}'],\n            [name='${SELECTOR.BACKGROUNDGRAD2}'],\n            [name='${SELECTOR.BACKGROUNDIMAGE}'],\n            [name='${SELECTOR.BACKGROUNDIMAGEATTACHMENT}']\n        `).closest('.setting-item').addClass('d-none');\n        switch($(`[name='${SELECTOR.BACKGROUNDCHOOSE}']`).val()) {\n            case 'color':\n                $(`[name='${SELECTOR.BACKGROUNDCOLOR}']`).closest('.setting-item').removeClass('d-none');\n                let color = $(`[name='${SELECTOR.BACKGROUNDCOLOR}']`).spectrum('get').toString();\n                Utils.putStyle(SELECTOR.BACKGROUNDCHOOSE, `\n                    #page {\n                        background-color: ${color};\n                    }\n                `);\n                break;\n            case 'gradient':\n                $(`\n                    [name='${SELECTOR.BACKGROUNDGRAD1}'],\n                    [name='${SELECTOR.BACKGROUNDGRAD2}']\n                `).closest('.setting-item').removeClass('d-none');\n                let color1 = $(`[name='${SELECTOR.BACKGROUNDGRAD1}']`).spectrum('get').toString();\n                let color2 = $(`[name='${SELECTOR.BACKGROUNDGRAD2}']`).spectrum('get').toString();\n                Utils.putStyle(SELECTOR.BACKGROUNDCHOOSE, `\n                    #page {\n                        background: linear-gradient(100deg, ${color1}, ${color2});\n                    }\n                `);\n                break;\n            case 'image':\n                $(`\n                    [name='${SELECTOR.BACKGROUNDIMAGE}'],\n                    [name='${SELECTOR.BACKGROUNDIMAGEATTACHMENT}']\n                `).closest('.setting-item').removeClass('d-none');\n                let itemid = $(`[name='${SELECTOR.BACKGROUNDIMAGE}']`).val();\n                let attachment = $(`[name='${SELECTOR.BACKGROUNDIMAGEATTACHMENT}']`).val();\n                Utils.getFileURL(itemid).done(function(response) {\n                    if (response == '') {\n                        response = M.cfg.wwwroot + '/theme/remui/pix/placeholder.png';\n                    }\n\n                    Utils.putStyle(SELECTOR.BACKGROUNDCHOOSE, `\n                        #page {\n                            background: url('${response}');\n                            background-attachment: ${attachment};\n                            background-position: top;\n                            background-size: ${attachment == 'fixed' ? 'cover' : 'auto'};\n                        }\n                    `);\n                });\n                break;\n        }\n    }\n\n    function apply() {\n        Utils.putStyle(SELECTOR.SITECOLOR, getSiteColorContent());\n        handleBackground();\n    }\n\n    function init() {\n        // Site color.\n        $(`\n            [name='${SELECTOR.SITECOLOR}']\n        `).bind('color.changed', function() {\n            apply();\n        });\n\n        $(`\n            [name='${SELECTOR.BACKGROUNDCOLOR}'],\n            [name='${SELECTOR.BACKGROUNDGRAD1}'],\n            [name='${SELECTOR.BACKGROUNDGRAD2}']\n        `).on('color.changed', function() {\n            handleBackground();\n        });\n\n        // Navbar inverse.\n        $(`\n            [name='${SELECTOR.BACKGROUNDCHOOSE}'],\n            [name='${SELECTOR.BACKGROUNDIMAGEATTACHMENT}']\n        `).on('input', function() {\n            handleBackground();\n        });\n\n        // Background image observer.\n        Utils.fileObserver($(`[name='${SELECTOR.BACKGROUNDIMAGE}']`).siblings('.filemanager')[0], handleBackground);\n    }    \n\n    return {\n        init: init,\n        apply: apply\n    };\n});\n"],"file":"global-colors.min.js"}